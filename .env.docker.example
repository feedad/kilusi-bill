# =====================================================================
# Kilusi Bill - Environment Configuration Template
# =====================================================================
# Copy this file to .env and configure according to your deployment
# =====================================================================

# ===================================================================== 
# DEPLOYMENT MODE
# =====================================================================
# Options: docker, native, hybrid
# - docker: All services in Docker
# - native: All services installed directly on server
# - hybrid: Mix of Docker and native (configure each service below)
#   - docker-db-radius: Docker for DB and RADIUS, native for Backend and Frontend
#   - docker-backend: Docker for DB, RADIUS, and Backend, native for Frontend
DEPLOYMENT_MODE=docker

# =====================================================================
# DATABASE CONFIGURATION
# =====================================================================
# PostgreSQL connection settings

# Database host
# - For Docker: use 'postgres' (service name)
# - For native/external: use IP address or hostname
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DATABASE=kilusi_bill
POSTGRES_USER=kilusi_user
POSTGRES_PASSWORD=kilusi1234

# Database initialization
# Set to 'true' to run master schema on first startup
DB_INIT_SCHEMA=true

# =====================================================================
# FREERADIUS CONFIGURATION
# =====================================================================
# FreeRADIUS server settings

# FreeRADIUS host
# - For Docker: use 'freeradius' (service name)
# - For native: use 'localhost' or IP address
# - For separate server: use IP address of RADIUS server
RADIUS_HOST=freeradius
RADIUS_PORT=1812
RADIUS_ACCT_PORT=1813

# RADIUS shared secret (must match in NAS configuration)
RADIUS_SECRET=testing123

# FreeRADIUS deployment
# Options: docker, native, external
RADIUS_DEPLOYMENT=docker

# =====================================================================
# BACKEND API CONFIGURATION
# =====================================================================
NODE_ENV=production
BACKEND_PORT=3001
HOST=0.0.0.0

# Session secret (change this in production!)
SESSION_SECRET=change-this-in-production-very-important

# API Key for internal services
API_KEY=kilusi-api-2024

# Admin default credentials (for initial setup only)
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin

# =====================================================================
# FRONTEND CONFIGURATION
# =====================================================================
FRONTEND_PORT=80
FRONTEND_HTTPS_PORT=443

# Backend API URL (used by frontend)
# - For Docker: http://backend:3001
# - For production: https://your-domain.com/api
BAALLOWED_ORIGINS=http://localhost:3001,http://localhost:3000

# =====================================================================
# WHATSAPP CLOUD API (Optional)
# =====================================================================
# Leave empty if not using WhatsApp integration
WHATSAPP_ACCESS_TOKEN=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_WEBHOOK_VERIFY_TOKEN=
WHATSAPP_API_VERSION=v18.0

# WhatsApp Super Admin (for bot admin features)
# Phone number with country code (e.g., 628115345333)
WHATSAPP_SUPER_ADMIN=

# Admin WhatsApp number (for notifications)
ADMIN_WHATSAPP_NUMBER=

# =====================================================================
# PAYMENT GATEWAY - TRIPAY (Optional)
# =====================================================================
# Leave empty if not using Tripay payment gateway
TRIPAY_API_KEY=
TRIPAY_PRIVATE_KEY=
TRIPAY_MERCHANT_CODE=
TRIPAY_MODE=sandbox  # sandbox or production

# =====================================================================
# NETWORK CONFIGURATION (Docker only)
# =====================================================================
# Subnet for Docker network
DOCKER_SUBNET=172.20.0.0/16

# =====================================================================
# LOGGING CONFIGURATION
# =====================================================================
LOG_LEVEL=info  # debug, info, warn, error
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs

# =====================================================================
# SNMP MONITORING CONFIGURATION
# =====================================================================
# Auto-start SNMP monitoring service
SNMP_MONITOR_ENABLED=true

# Monitoring interval in minutes
SNMP_MONITOR_INTERVAL=3

# Maximum concurrent SNMP checks
SNMP_MONITOR_BATCH_SIZE=5

# Default SNMP settings for new NAS
DEFAULT_SNMP_VERSION=2c
DEFAULT_SNMP_COMMUNITY=public
DEFAULT_SNMP_PORT=161

# =====================================================================
# BILLING CONFIGURATION
# =====================================================================
# Default billing cycle type
# Options: profile, fixed, monthly
DEFAULT_BILLING_CYCLE=profile

# Invoice advance days (how many days before due date to generate)
INVOICE_ADVANCE_DAYS=5

# Profile default period (days)
PROFILE_DEFAULT_PERIOD=30

# Fixed billing day (1-28)
FIXED_BILLING_DAY=1

# =====================================================================
# EMAIL CONFIGURATION (Optional)
# =====================================================================
EMAIL_ENABLED=false
EMAIL_HOST=
EMAIL_PORT=587
EMAIL_USER=
EMAIL_PASSWORD=
EMAIL_FROM=noreply@kilusi-bill.local

# =====================================================================
# BACKUP CONFIGURATION
# =====================================================================
# Automatic database backup
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=./backups

# =====================================================================
# SECURITY CONFIGURATION
# =====================================================================
# Enable HTTPS  (requires SSL certificates)
HTTPS_ENABLED=false
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem

# CORS settings
CORS_ORIGIN=*  # In production, set to your frontend domain

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes

# =====================================================================
# DEVELOPMENT SETTINGS
# =====================================================================
# Only use in development environment!
DEBUG=false
SQL_DEBUG=false
DISABLE_AUTH=false

# =====================================================================
# DEPLOYMENT SCENARIOS
# =====================================================================
#
# SCENARIO 1: Full Docker Deployment (All-in-One)
# ------------------------------------------------
# DEPLOYMENT_MODE=docker
# POSTGRES_HOST=postgres
# RADIUS_HOST=freeradius
# RADIUS_DEPLOYMENT=docker
# Command: docker-compose up -d
#
# SCENARIO 2: Docker with External PostgreSQL
# --------------------------------------------
# DEPLOYMENT_MODE=hybrid
# POSTGRES_HOST=192.168.1.100  # Your PostgreSQL server IP
# RADIUS_HOST=freeradius
# RADIUS_DEPLOYMENT=docker
# Comment out 'postgres' service in docker-compose.yml
# Command: docker-compose up -d freeradius backend frontend
#
# SCENARIO 3: Docker with Native FreeRADIUS
# ------------------------------------------
# DEPLOYMENT_MODE=hybrid
# POSTGRES_HOST=192.168.1.100
# RADIUS_HOST=localhost
# RADIUS_DEPLOYMENT=native
# Install FreeRADIUS on host using: ./freeradius/install-freeradius.sh
# Comment out 'freeradius' service in docker-compose.yml
# Command: docker-compose up -d backend frontend
#
# SCENARIO 4: Separate Servers (PostgreSQL + FreeRADIUS External)
# ----------------------------------------------------------------
# DEPLOYMENT_MODE=hybrid
# POSTGRES_HOST=192.168.1.100  # Database server IP
# RADIUS_HOST=192.168.1.101    # RADIUS server IP
# RADIUS_DEPLOYMENT=external
# Comment out 'postgres' and 'freeradius' in docker-compose.yml
# Command: docker-compose up -d backend frontend
#
# SCENARIO 5: Hybrid - Docker DB + RADIUS, Native Backend + Frontend
# -----------------------------------------------------------
# DEPLOYMENT_MODE=hybrid
# POSTGRES_HOST=postgres      # Docker service name
# RADIUS_HOST=freeradius     # Docker service name
# RADIUS_DEPLOYMENT=docker
# Command: ./install.sh (select option 1)
#
# SCENARIO 6: Hybrid - Docker DB + RADIUS + Backend, Native Frontend
# -----------------------------------------------------------
# DEPLOYMENT_MODE=hybrid
# POSTGRES_HOST=postgres      # Docker service name
# RADIUS_HOST=freeradius     # Docker service name
# RADIUS_DEPLOYMENT=docker
# Command: ./install.sh (select option 3)
#
# SCENARIO 7: All Native Installation
# ---------------------------------
# DEPLOYMENT_MODE=native
# POSTGRES_HOST=localhost
# RADIUS_HOST=localhost
# RADIUS_DEPLOYMENT=native
# Command: ./install.sh (select option 4)
#
# SCENARIO 8: Native Installation (No Docker)
# --------------------------------------------
# DEPLOYMENT_MODE=native
# POSTGRES_HOST=localhost
# RADIUS_HOST=localhost
# RADIUS_DEPLOYMENT=native
# Run installation script: ./install.sh
# Start backend: cd backend && npm start
# Start frontend: cd frontend && npm run build && serve -s dist
#
# =====================================================================